{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"app-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"loading-overlay\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"layout-wrapper\"\n};\nconst _hoisted_4 = {\n  class: \"layout-main\"\n};\nconst _hoisted_5 = {\n  class: \"layout-content\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ProgressSpinner = _resolveComponent(\"ProgressSpinner\");\n  const _component_Sidebar = _resolveComponent(\"Sidebar\");\n  const _component_Header = _resolveComponent(\"Header\");\n  const _component_router_view = _resolveComponent(\"router-view\");\n  const _component_Footer = _resolveComponent(\"Footer\");\n  const _component_Toast = _resolveComponent(\"Toast\");\n  const _component_ConfirmDialog = _resolveComponent(\"ConfirmDialog\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createVNode(_component_ProgressSpinner)])) : _createCommentVNode(\"\", true), $setup.isAuthenticated && !$setup.isLoginPage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createVNode(_component_Sidebar, {\n    visible: $setup.sidebarVisible,\n    onClose: _cache[0] || (_cache[0] = $event => $setup.sidebarVisible = false)\n  }, null, 8, [\"visible\"]), _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_Header, {\n    onToggleSidebar: _cache[1] || (_cache[1] = $event => $setup.sidebarVisible = !$setup.sidebarVisible)\n  }), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_router_view)]), _createVNode(_component_Footer)])])) : (_openBlock(), _createBlock(_component_router_view, {\n    key: 2\n  })), _createVNode(_component_Toast, {\n    position: \"top-right\"\n  }), _createVNode(_component_ConfirmDialog)]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","$setup","loading","_hoisted_2","_createVNode","_component_ProgressSpinner","_createCommentVNode","isAuthenticated","isLoginPage","_hoisted_3","_component_Sidebar","visible","sidebarVisible","onClose","_cache","$event","_createElementVNode","_hoisted_4","_component_Header","onToggleSidebar","_hoisted_5","_component_router_view","_component_Footer","_createBlock","_component_Toast","position","_component_ConfirmDialog"],"sources":["/home/pi/projects/intranet/frontend/src/App.vue"],"sourcesContent":["<template>\r\n    <div class=\"app-container\">\r\n      <!-- Loading overlay -->\r\n      <div v-if=\"loading\" class=\"loading-overlay\">\r\n        <ProgressSpinner />\r\n      </div>\r\n      \r\n      <!-- Authenticated layout with sidebar and header -->\r\n      <template v-if=\"isAuthenticated && !isLoginPage\">\r\n        <div class=\"layout-wrapper\">\r\n          <!-- Sidebar -->\r\n          <Sidebar :visible=\"sidebarVisible\" @close=\"sidebarVisible = false\" />\r\n          \r\n          <!-- Main content -->\r\n          <div class=\"layout-main\">\r\n            <!-- Header -->\r\n            <Header @toggle-sidebar=\"sidebarVisible = !sidebarVisible\" />\r\n            \r\n            <!-- Page content -->\r\n            <div class=\"layout-content\">\r\n              <router-view />\r\n            </div>\r\n            \r\n            <!-- Footer -->\r\n            <Footer />\r\n          </div>\r\n        </div>\r\n      </template>\r\n      \r\n      <!-- Unauthenticated layout (login page) -->\r\n      <template v-else>\r\n        <router-view />\r\n      </template>\r\n      \r\n      <!-- Toast notifications -->\r\n      <Toast position=\"top-right\" />\r\n      \r\n      <!-- Confirmation dialog -->\r\n      <ConfirmDialog />\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { ref, computed, onMounted, onBeforeUnmount } from 'vue';\r\n  import { useStore } from 'vuex';\r\n  import { useRoute } from 'vue-router';\r\n  import Toast from 'primevue/toast';\r\n  import ConfirmDialog from 'primevue/confirmdialog';\r\n  import ProgressSpinner from 'primevue/progressspinner';\r\n  \r\n  // Import layout components\r\n  import Header from './components/layout/Header.vue';\r\n  import Sidebar from './components/layout/Sidebar.vue';\r\n  import Footer from './components/layout/Footer.vue';\r\n  \r\n  export default {\r\n    name: 'App',\r\n    components: {\r\n      Header,\r\n      Sidebar,\r\n      Footer,\r\n      Toast,\r\n      ConfirmDialog,\r\n      ProgressSpinner\r\n    },\r\n    setup() {\r\n      const store = useStore();\r\n      const route = useRoute();\r\n      const sidebarVisible = ref(false);\r\n      \r\n      // Computed properties\r\n      const isAuthenticated = computed(() => store.state.isAuthenticated);\r\n      const loading = computed(() => store.state.loading);\r\n      const isLoginPage = computed(() => route.name === 'Login');\r\n      \r\n      // Token refresh interval\r\n      let refreshTokenInterval = null;\r\n      \r\n      // Setup token refresh interval\r\n      const setupTokenRefresh = () => {\r\n        // Clear existing interval if any\r\n        if (refreshTokenInterval) {\r\n          clearInterval(refreshTokenInterval);\r\n        }\r\n        \r\n        // Set up new interval (every 10 minutes)\r\n        refreshTokenInterval = setInterval(async () => {\r\n          if (isAuthenticated.value) {\r\n            await store.dispatch('refreshToken');\r\n          }\r\n        }, 10 * 60 * 1000); // 10 minutes\r\n      };\r\n      \r\n      // Lifecycle hooks\r\n      onMounted(async () => {\r\n        // If authenticated, refresh user data\r\n        if (isAuthenticated.value) {\r\n          try {\r\n            await store.dispatch('getUserProfile');\r\n            setupTokenRefresh();\r\n          } catch (error) {\r\n            console.error('Failed to load user profile:', error);\r\n          }\r\n        }\r\n        \r\n        // Add window resize handler\r\n        window.addEventListener('resize', onResize);\r\n      });\r\n      \r\n      onBeforeUnmount(() => {\r\n        // Clear interval on component destroy\r\n        if (refreshTokenInterval) {\r\n          clearInterval(refreshTokenInterval);\r\n        }\r\n        \r\n        // Remove resize handler\r\n        window.removeEventListener('resize', onResize);\r\n      });\r\n      \r\n      // Window resize handler\r\n      const onResize = () => {\r\n        // Close sidebar on small screens when resizing\r\n        if (window.innerWidth < 768) {\r\n          sidebarVisible.value = false;\r\n        }\r\n      };\r\n      \r\n      return {\r\n        sidebarVisible,\r\n        isAuthenticated,\r\n        loading,\r\n        isLoginPage\r\n      };\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style>\r\n  /* Global styles */\r\n  :root {\r\n    --primary-color: #3B82F6;\r\n    --secondary-color: #64748B;\r\n    --success-color: #22C55E;\r\n    --info-color: #3B82F6;\r\n    --warning-color: #F59E0B;\r\n    --danger-color: #EF4444;\r\n    --surface-ground: #F8FAFC;\r\n    --surface-section: #FFFFFF;\r\n    --surface-card: #FFFFFF;\r\n    --surface-overlay: #FFFFFF;\r\n    --surface-border: #E2E8F0;\r\n    --text-color: #334155;\r\n    --text-color-secondary: #64748B;\r\n    --sidebar-width: 240px;\r\n    --topbar-height: 60px;\r\n  }\r\n  \r\n  /* Reset and base styles */\r\n  * {\r\n    box-sizing: border-box;\r\n    margin: 0;\r\n    padding: 0;\r\n  }\r\n  \r\n  body {\r\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, \r\n                 Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji';\r\n    color: var(--text-color);\r\n    background-color: var(--surface-ground);\r\n    margin: 0;\r\n    padding: 0;\r\n    min-height: 100vh;\r\n    font-size: 14px;\r\n    line-height: 1.5;\r\n  }\r\n  \r\n  /* Layout styles */\r\n  .layout-wrapper {\r\n    display: flex;\r\n    min-height: 100vh;\r\n  }\r\n  \r\n  .layout-main {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n    min-height: 100vh;\r\n    transition: margin-left 0.3s;\r\n  }\r\n  \r\n  .layout-content {\r\n    flex: 1;\r\n    padding: 1.5rem;\r\n    background-color: var(--surface-ground);\r\n  }\r\n  \r\n  /* Responsive sidebar adjustments */\r\n  @media screen and (min-width: 768px) {\r\n    .layout-main {\r\n      margin-left: var(--sidebar-width);\r\n    }\r\n  }\r\n  \r\n  /* Loading overlay */\r\n  .loading-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background-color: rgba(0, 0, 0, 0.4);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    z-index: 9999;\r\n  }\r\n  \r\n  /* Custom scrollbar */\r\n  ::-webkit-scrollbar {\r\n    width: 8px;\r\n    height: 8px;\r\n  }\r\n  \r\n  ::-webkit-scrollbar-track {\r\n    background-color: transparent;\r\n  }\r\n  \r\n  ::-webkit-scrollbar-thumb {\r\n    background-color: var(--secondary-color);\r\n    border-radius: 4px;\r\n  }\r\n  \r\n  /* Card styles */\r\n  .card {\r\n    background: var(--surface-card);\r\n    border-radius: 0.5rem;\r\n    padding: 1.5rem;\r\n    box-shadow: 0 2px 1px -1px rgba(0, 0, 0, 0.1),\r\n                0 1px 1px 0 rgba(0, 0, 0, 0.07),\r\n                0 1px 3px 0 rgba(0, 0, 0, 0.06);\r\n    margin-bottom: 1.5rem;\r\n  }\r\n  \r\n  /* Page title styles */\r\n  .page-title {\r\n    font-size: 1.5rem;\r\n    font-weight: 500;\r\n    color: var(--text-color);\r\n    margin-bottom: 1.5rem;\r\n  }\r\n  \r\n  /* Utility classes */\r\n  .text-center {\r\n    text-align: center;\r\n  }\r\n  \r\n  .mt-2 {\r\n    margin-top: 0.5rem;\r\n  }\r\n  \r\n  .mt-4 {\r\n    margin-top: 1rem;\r\n  }\r\n  \r\n  .mb-2 {\r\n    margin-bottom: 0.5rem;\r\n  }\r\n  \r\n  .mb-4 {\r\n    margin-bottom: 1rem;\r\n  }\r\n  </style>"],"mappings":";;EACSA,KAAK,EAAC;AAAe;;EAD9BC,GAAA;EAG0BD,KAAK,EAAC;;;EAHhCC,GAAA;EASaD,KAAK,EAAC;;;EAKJA,KAAK,EAAC;AAAa;;EAKjBA,KAAK,EAAC;AAAgB;;;;;;;;;uBAlBnCE,mBAAA,CAsCM,OAtCNC,UAsCM,GApCOC,MAAA,CAAAC,OAAO,I,cAAlBH,mBAAA,CAEM,OAFNI,UAEM,GADJC,YAAA,CAAmBC,0BAAA,E,KAJ3BC,mBAAA,YAQsBL,MAAA,CAAAM,eAAe,KAAKN,MAAA,CAAAO,WAAW,I,cAC7CT,mBAAA,CAiBM,OAjBNU,UAiBM,GAfJL,YAAA,CAAqEM,kBAAA;IAA3DC,OAAO,EAAEV,MAAA,CAAAW,cAAc;IAAGC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEd,MAAA,CAAAW,cAAc;4BAGzDI,mBAAA,CAWM,OAXNC,UAWM,GATJb,YAAA,CAA6Dc,iBAAA;IAApDC,eAAc,EAAAL,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEd,MAAA,CAAAW,cAAc,IAAIX,MAAA,CAAAW,cAAc;MAGzDI,mBAAA,CAEM,OAFNI,UAEM,GADJhB,YAAA,CAAeiB,sBAAA,E,GAIjBjB,YAAA,CAAUkB,iBAAA,E,sBAOdC,YAAA,CAAeF,sBAAA;IA/BvBvB,GAAA;EAAA,KAmCMM,YAAA,CAA8BoB,gBAAA;IAAvBC,QAAQ,EAAC;EAAW,IAG3BrB,YAAA,CAAiBsB,wBAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}